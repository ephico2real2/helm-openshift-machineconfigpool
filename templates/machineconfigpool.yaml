{{- range .Values.machineConfigPools }}
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfigPool
metadata:
  name: {{ .mcpName }}
spec:
  machineConfigSelector:
    matchExpressions:
      - {key: machineconfiguration.openshift.io/role, operator: In, values: {{ .machineRoles | toJson }} }
  {{- if .maxUnavailable }}
  maxUnavailable: {{ .maxUnavailable }}
  {{- else }}
  maxUnavailable: null
  {{- end }}
  nodeSelector:
    {{- if .nodeSelector }}
    matchLabels: {{- .nodeSelector | toYaml | nindent 6 }}
    {{- end }}
  paused: {{ .paused | default "false" }}
---
{{- end }}

